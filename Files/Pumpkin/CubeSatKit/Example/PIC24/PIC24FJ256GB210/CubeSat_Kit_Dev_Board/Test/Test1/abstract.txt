/****************************************************************************** 
(C)Copyright Pumpkin, Inc. Freely distributable.

$Source: C:\\RCS\\D\\Pumpkin\\CubeSatKit\\Example\\PIC24\\PIC24FJ256GB210\\CubeSat_Kit_Dev_Board\\Test\\Test1\\abstract.txt,v $
$Author: aek $
$Revision: 3.2 $
$Date: 2011-09-17 22:12:29-07 $

******************************************************************************/

*******************************************************************************

Test1 test/validation application for CubeSat Kits running with PIC24-based 
PPM E1s.

(C)Copyright Pumpkin, Inc. All Rights Reserved.

WARNING: The shutdown command ('z') of this application sets nearly all of the 
microcontroller's signals (and hence, signals on the CubeSat Kit bus) to be 
_outputs_. This permits validation of the current draw of the entire system 
when in sleep mode. However, this may lead to damage of circuitry attached via
the CubeSat Kit bus in cases where external circuitry drives signals that are
connected directly to the microcontroller (e.g., IO[47..0]). Therefore it is 
STRONGLY recommended that you remove any CubeSat Kit modules that drive signals 
onto the bus before using this application.

*******************************************************************************

BLOCK DIAGRAM:

             +------------+
             |    PC      |
             +------------+
                   ^
                   |
                   v
             +------------+
             | MPLAB ICD2 |
             +------------+
                   ^
                   |
                   v
             +------------+
  6-24Vdc    | JFPC-PIC24 |
    |        +------------+
    v              ^
  +----------------|----------------------------------------------------------+
  | J3             v                                                          |
  |         +-------------+      CubeSat Kit Development Board                |
  |         |   PPM E1    |                                                   |
  |         |     or      |                                                   |
  |         |   PSPM E    |                          +-------------------+    |
  |         +-------------+                          | MHX2400 or equiv. |    |
  |                                                  |    9600,N,8,1     |    |
  |                                                  +-------------------+    |   
  |                                                                           |   
  |                                                                           |   
  |                                                                           |   
  |                                                                           |   
  |                                                                           |   
  |     J8             J2                                                     |   
  +---------------------------------------------------------------------------+
        ^              ^
        |              |
        v              v
  +------------+ +------------+
  |     PC     | |     PC     |
  | 9600,N,8,1 | | 9600,N,8,1 |
  +------------+ +------------+
  
J8: connect via null-modem cable (DB9 receptacle on each end)
J2: connect via USB cable  

*******************************************************************************

PREREQUISITES:                                      Min. version

  Hardware:
    Pumpkin CubeSat Kit Development Board              Rev D
    Pumpkin PPM E1 or PSPM E w/PIC24FJ256GA110         Rev B
    Pumpkin JFPC-PIC24                                 Rev A
    Microchip MPLAB ICD 2 or equivalent

  Software:
    Pumpkin CubeSat Kit /PIC24                         1.2.4
    Pumpkin Salvo for PIC24/dsPIC                      4.2.2
    Pumpkin Library for PIC24                          1.0.2
    Microchip MPLAB C30 compiler (for PIC24/dsPIC)     3.2.3
    Microchip MPLAB IDE                                8.33
    
RECOMMENDED:

  Hardware:
    Pumpkin CubeSat Kit Test Board A (LED Module)      Rev B     

*******************************************************************************

DESCRIPTION:

This application is the standard test/validation software for Pumpkin CubeSat
Kits fitted with PPM E1 (PIC24FJ256GB210).

This application is built from a variety of sources and requires that all of 
the software listed above be installed. 

When running and connected as per the block diagram above, the user will be 
presented with three terminal screens:

  * J8: a user debug terminal, listing the actions the application is 
     taking, with timestamps in system ticks. This terminal accepts
     one-letter commands -- type 'h' for a help screen.
  * J2: a status display, with timestamps in system ticks, with an 
     informational message
  * MHX: a status display, with timestamps in ticks, with modem command
     strings and informational messages
     
This application runs multiple tasks and exercises the various parts of
the CubeSat Kit hardware architecture.  

The PPM D1 and E1 test programs and projects are nearly identical because the 
the two PIC24 processors used in PPM D1 and E1 have similar basic 
functionality. The primary differences between the projects are:

  * Each project is configured for the appropriate processor (PIC24FJs56GA110 or 
    PIC24FJ256GB210)
  * The include path points to the project directory
  * The project's unique files are within the D1 (PIC24FJ256GA110) tree ... the
    E1's project references these files. This abstract -- and the E1-specific
    project files -- are the only files in the E1 tree. Therefore, this project's
    Include paths reference the PIC24FJ256GA110 project in the D1 tree ...

Note that some of the support files for the PIC24 have target-dependent sections,
based on whether a PIC24FJ256GA110 (PPM D1) or PIC24FJ256GB210 (PPM E1) are in
use. This is because the pinouts of the two processors in their PPMs differ
slightly.
  
  *******************************************************************************

NOTES:

1. This application is built with the Microchip MPLAB C Compiler for PIC24 MCUs
and dsPIC DSCs (also called MPLAB C30, P/N SW006012). It has _not_ been tested 
with either the MPLAB C Compiler for PIC24 MCUs only (P/N SW006014) or with the 
MPLAB C Compiler for dsPIC DSCs only (P/N SW006013). Other compilers (e.g., 
HI-TECH or IAR) are _not_ supported.

2. This application uses the Microchip PIC24F Peripheral Library (included with
MPLAB C30) for peripheral initialization, etc. The header files for this library
are normally installed as part of an MPLAB C30 installation. To ensure compatibility
with these projects, Pumpkin supplies a pre-compiled version of this library with
this distribution. It is located in PIC24\Lib and is referenced by this
application. You may need to rebuild this library (follow Microchip's instructions
and sample MPLAB project) if your compiler is substantially newer than this
release of the CubeSat Kit /PIC24 software.

3. task_usb_talk() reports an on-chip temperature of 0C because the PIC24 has no
on-chip temperature sensor.

4. You can run this application within the MPLAB SIM simulator -- output from
the CubeSat Kit's UART0 (e.g., J8 on the Dev Board) will appear in the SIM
Uart1 tab of MPLAB's Output window. When running inside the simulator, you
can e.g. measure the system timer tick period by placing a breakpoint on the
call to OSTimer() and measuring elapsed time with MPLAB SIM's Stopwatch.




